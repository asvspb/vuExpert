# üêò PostgreSQL –≤–æ VueExpert: –º–∏–≥—Ä–∞—Ü–∏—è –∏ –º–æ—â–Ω—ã–µ —Ñ–∏—á–∏ (–£—Ä–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ MASTER_PROMPT)

### –ö–æ–Ω—Ç–µ–∫—Å—Ç (–°—é–∂–µ—Ç)
SQLite —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è. –ë–∏–∑–Ω–µ—Å –∂–¥—ë—Ç JSON‚Äë—Ñ–∏–ª—å—Ç—Ä—ã –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏. –ü–æ—Ä–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Postgres.

### 1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ó–∞–¥–∞–Ω–∏–µ (–¢–ó)
- Basic: –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ DATABASE_URL=postgresql+asyncpg, –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, alembic upgrade
- Advanced: JSONB+GIN –∏–Ω–¥–µ–∫—Å—ã, —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã (DECIMAL/UUID), –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É–ª–æ–≤
- –§–∞–π–ª—ã: `.env`, `backend/app/database.py`, Alembic migration
- –ó–∞–¥–∞—á–∞: –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ `DATABASE_URL=postgresql+asyncpg://...`, –ø–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `postgres:16-alpine`, –≤—ã–ø–æ–ª–Ω–∏—Ç—å `alembic upgrade head`.
- –£—Å–ª–æ–≤–∏—è: —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã (`DECIMAL`, `UUID`), JSONB –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤.

### 2. –†–µ—Ñ–µ—Ä–µ–Ω—Å (Visual/Logic Target)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Postgres
- –ö–æ–ª–æ–Ω–∫–∞ `products.attributes` JSONB, –∏–Ω–¥–µ–∫—Å—ã GIN

### 3. –¢–µ–æ—Ä–∏—è (Just-in-Time)
- asyncpg vs aiosqlite, MVCC, GIN –∏–Ω–¥–µ–∫—Å—ã

### 4. –ü—Ä–∞–∫—Ç–∏–∫–∞ (Interactive Steps)
–§—Ä–∞–≥–º–µ–Ω—Ç—ã –∫ –¥–æ—Ä–∞–±–æ—Ç–∫–µ:
```yaml
services:
  db:
    image: postgres:16-alpine
    environment:
      - POSTGRES_PASSWORD=pass
      - POSTGRES_USER=user
      - POSTGRES_DB=app
    ports: ["5432:5432"]
    volumes: ["pgdata:/var/lib/postgresql/data"]
```
```py
engine = create_async_engine(os.getenv("DATABASE_URL"), echo=False)
```
```sql
ALTER TABLE products ADD COLUMN attributes JSONB;
CREATE INDEX IF NOT EXISTS idx_products_attributes ON products USING GIN (attributes);
```

### 5. –ß–µ–∫-–ª–∏—Å—Ç –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ (Verification)
- [ ] DATABASE_URL –∞–∫—Ç–∏–≤–µ–Ω
- [ ] Alembic –ø—Ä–∏–º–µ–Ω—ë–Ω
- [ ] JSONB + GIN –Ω–∞ –º–µ—Å—Ç–µ

### 6. –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ (Troubleshooting)
- –ù–µ–≤–µ—Ä–Ω—ã–π DSN ‚Üí –¥—Ä–∞–π–≤–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ë–µ–∑ GIN –ø–æ–∏—Å–∫ –ø–æ JSONB –º–µ–¥–ª–µ–Ω–Ω—ã–π
- –ù–µ–≤–µ—Ä–Ω—ã–µ —Ç–∏–ø—ã (FLOAT –¥–ª—è –¥–µ–Ω–µ–≥) ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DECIMAL

### 7. –†–µ—à–µ–Ω–∏–µ (Spoiler)
<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–∞–ª–æ–Ω</summary>

```env
DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/app
```
</details>

---

–í–æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞ –ø–æ **PostgreSQL** –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ **VueExpert**.
> –°–º. –ø—Ä–∞–≤–∏–ª–∞ –æ—Ü–µ–Ω–∫–∏: [MODULE_ASSESSMENT.md](./MODULE_ASSESSMENT.md)


–ú—ã –Ω–µ –±—É–¥–µ–º —É—á–∏—Ç—å SQL –∑–∞–Ω–æ–≤–æ (—ç—Ç–æ –±—ã–ª–æ –≤ –º–æ–¥—É–ª–µ SQLite).
–ù–∞—à–∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è: **¬´SQLite ‚Äî —ç—Ç–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥, PostgreSQL ‚Äî —ç—Ç–æ —Å–ø–æ—Ä—Ç–∫–∞—Ä¬ª**.
–í —ç—Ç–æ–º –∫—É—Ä—Å–µ –º—ã —É—á–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–æ–π –º–æ—â–Ω–æ—Å—Ç—å—é: —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç—Ä–æ–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å—é, JSONB –∏ Docker-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

---

# üêò PostgreSQL –≤–æ VueExpert: Enterprise Database

–ö—É—Ä—Å —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏:
1.  **Basic:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker), –º–∏–≥—Ä–∞—Ü–∏—è —Å SQLite, —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –¥—Ä–∞–π–≤–µ—Ä—ã.
2.  **Advanced:** JSONB, —Å–ª–æ–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (MVCC), –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è. **–ì–∞—Ä–∞–Ω—Ç —É—Ä–æ–≤–Ω—è Middle.**

---

## üü¢ –ß–ê–°–¢–¨ 1. BASIC: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¢–∏–ø—ã
*–¶–µ–ª—å: –ó–∞–ø—É—Å—Ç–∏—Ç—å Postgres –≤ Docker, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–µ —Å–ª–æ–º–∞—Ç—å —Ç–∏–ø—ã.*

### üê≥ –ú–æ–¥—É–ª—å PG1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker First)

–ü–µ—Ä–µ—Ö–æ–¥ —Å —É—á–µ–±–Ω–æ–≥–æ SQLite:
- –ó–∞–¥–∞–π—Ç–µ `DATABASE_URL` (–∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `SQLITE_PATH`), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä–∞–π–≤–µ—Ä `asyncpg`.
- –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å `db` –≤ `docker-compose.yml` (image `postgres:16-alpine`), –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ volume.
- –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic, –∑–∞—Ç–µ–º `alembic upgrade head`.

**–ú–µ—Ç–∞—Ñ–æ—Ä–∞:** "–ü–µ—Ä–µ–µ–∑–¥ –∏–∑ –∫–ª–∞–¥–æ–≤–∫–∏ –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π —Å–∫–ª–∞–¥".
*   **1.1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:**
    *   –ü–æ—á–µ–º—É –º—ã –Ω–µ —Å—Ç–∞–≤–∏–º Postgres –Ω–∞ Windows/Mac (–≤–µ—Ä—Å–∏–∏, –º—É—Å–æ—Ä –≤ —Å–∏—Å—Ç–µ–º–µ).
    *   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `docker-compose.yml`: image `postgres:16-alpine`, environment variables (`POSTGRES_USER`, `POSTGRES_PASSWORD`).
    *   **Volume:** –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –∏—Å—á–µ–∑–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
*   **1.2. –ö–ª–∏–µ–Ω—Ç—ã:**
    *   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **DBeaver** –∏–ª–∏ –ø–ª–∞–≥–∏–Ω—ã VS Code.
    *   –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (DSN): `postgresql+asyncpg://user:pass@localhost:5432/db`.

### üîå –ú–æ–¥—É–ª—å PG2. –î—Ä–∞–π–≤–µ—Ä—ã –∏ –ú–∏–≥—Ä–∞—Ü–∏—è
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** "–ú–æ–º–µ–Ω—Ç –∏—Å—Ç–∏–Ω—ã" ‚Äî –º–µ–Ω—è–µ–º –±–∞–∑—É —É –∂–∏–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   **2.1. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `asyncpg`:**
    *   –ü–æ—á–µ–º—É —ç—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –¥—Ä–∞–π–≤–µ—Ä –≤ –º–∏—Ä–µ Python.
    *   –û—Ç–ª–∏—á–∏—è –æ—Ç `aiosqlite`.
*   **2.2. –ú–∏–≥—Ä–∞—Ü–∏—è SQLAlchemy:**
    *   –ú–µ–Ω—è–µ–º `DATABASE_URL` –≤ `.env`.
    *   –ó–∞–ø—É—Å–∫–∞–µ–º Alembic.
    *   *–ü—Ä–æ–±–ª–µ–º–∞:* SQLite –ø—Ä–æ—â–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Å—Ç—Ä–æ–∫, Postgres ‚Äî –Ω–µ—Ç. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π.

### üß± –ú–æ–¥—É–ª—å PG3. –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
*   **3.1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:**
    *   `SERIAL` / `IDENTITY` (–≤–º–µ—Å—Ç–æ AUTOINCREMENT).
    *   `BOOLEAN` (–≤ SQLite —ç—Ç–æ –±—ã–ª–æ 0/1, —Ç—É—Ç ‚Äî `true/false`).
    *   `DECIMAL` (–¥–ª—è –¥–µ–Ω–µ–≥ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–∏–∫–∞–∫–∏—Ö `FLOAT`).
    *   `UUID` –∫–∞–∫ Primary Key (–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ Integer ID –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö).
*   **3.2. –ú–∞—Å—Å–∏–≤—ã (Array):**
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Ç–µ–≥–æ–≤ `['sale', 'new']` –ø—Ä—è–º–æ –≤ —è—á–µ–π–∫–µ.
    *   –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ —á–µ—Ä–µ–∑ SQLAlchemy.

---

## üî¥ –ß–ê–°–¢–¨ 2. ADVANCED: High Load & Features (Middle Grade)
*–¶–µ–ª—å: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Postgres, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –¥—Ä—É–≥–∏—Ö –ë–î. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å.*

### üì¶ –ú–æ–¥—É–ª—å PGA1. JSONB (NoSQL –≤–Ω—É—Ç—Ä–∏ SQL)
**–ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞ Postgres.**
*   **1.1. JSON vs JSONB:**
    *   –ü–æ—á–µ–º—É Binary —Ñ–æ—Ä–º–∞—Ç –∫—Ä—É—á–µ (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –ø—Ä–æ–±–µ–ª—ã).
*   **1.2. –°—Ü–µ–Ω–∞—Ä–∏–π E-commerce:**
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞ (attributes), –∫–æ—Ç–æ—Ä—ã–µ —É –≤—Å–µ—Ö —Ä–∞–∑–Ω—ã–µ (—Ü–≤–µ—Ç, —Ä–∞–∑–º–µ—Ä, –≤–µ—Å).
    *   –í–º–µ—Å—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ EAV (Entity-Attribute-Value) –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–Ω—É –∫–æ–ª–æ–Ω–∫—É `attributes`.
*   **1.3. –ó–∞–ø—Ä–æ—Å—ã –∫ JSONB:**
    *   –û–ø–µ—Ä–∞—Ç–æ—Ä—ã `->`, `->>`, `@>`.
    *   –ü–æ–∏—Å–∫: "–ù–∞–π—Ç–∏ –≤—Å–µ —Ñ—É—Ç–±–æ–ª–∫–∏, –≥–¥–µ `color` == `red`".

### ‚ö°Ô∏è –ú–æ–¥—É–ª—å PGA2. –ò–Ω–¥–µ–∫—Å—ã 2.0
*   **2.1. B-Tree (–ö–ª–∞—Å—Å–∏–∫–∞):** –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω.
*   **2.2. GIN (Generalized Inverted Index):**
    *   –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è JSONB –∏ –ú–∞—Å—Å–∏–≤–æ–≤.
    *   –ë–µ–∑ GIN –ø–æ–∏—Å–∫ –ø–æ JSONB –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–º (Full Scan).
*   **2.3. EXPLAIN ANALYZE:**
    *   –£—á–∏–º—Å—è —á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞.
    *   Seq Scan vs Index Scan. –ü–æ–∏—Å–∫ "—É–∑–∫–∏—Ö –º–µ—Å—Ç".

### üö¶ –ú–æ–¥—É–ª—å PGA3. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ MVCC
**–¢–µ–æ—Ä–∏—è:** –ö–∞–∫ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–∫—É–ø–∞—é—Ç –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
*   **3.1. MVCC (Multi-Version Concurrency Control):**
    *   –ü–æ—á–µ–º—É `SELECT` –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç `WRITE`. "–°–Ω—ç–ø—à–æ—Ç—ã" –¥–∞–Ω–Ω—ã—Ö.
*   **3.2. –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**
    *   `Read Committed` (–¥–µ—Ñ–æ–ª—Ç).
    *   `Repeatable Read` –∏ `Serializable`. –§–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è.
*   **3.3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Locking):**
    *   –ü—Ä–æ–±–ª–µ–º–∞: Race Condition (–¥–≤–∞ —é–∑–µ—Ä–∞ –∫—É–ø–∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–æ–≤–∞—Ä).
    *   –†–µ—à–µ–Ω–∏–µ: `SELECT ... FOR UPDATE`. –Ø–≤–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏ –¥–æ –∫–æ–Ω—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

### üîç –ú–æ–¥—É–ª—å PGA4. Full Text Search (–ü–æ–∏—Å–∫)
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –î–µ–ª–∞–µ–º –ø–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º.
*   **4.1. `LIKE` vs `ILIKE`:** –ü–æ—á–µ–º—É —ç—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ.
*   **4.2. tsvector –∏ tsquery:**
    *   –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è (–ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ "—Å—Ç–æ–ª—ã" –∏ "—Å—Ç–æ–ª" ‚Äî –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ).
    *   –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å).

### ‚öôÔ∏è –ú–æ–¥—É–ª—å PGA5. Stored Procedures & Triggers (–ö—Ä–∞—Ç–∫–æ)
*   **5.1. –¢—Ä–∏–≥–≥–µ—Ä—ã:**
    *   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏.
*   **5.2. PL/pgSQL:**
    *   –ü–æ—á–µ–º—É –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ª—É—á—à–µ –¥–µ—Ä–∂–∞—Ç—å –≤ Python, –∞ –Ω–µ –≤ –ë–î (—Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ).

### üèÜ –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω Postgres (Middle Project)
**–ó–∞–¥–∞–Ω–∏–µ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å "–ö–∞—Ç–∞–ª–æ–≥" –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1.  **Docker:** –ë–î –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
2.  **Schema:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `UUID` –¥–ª—è ID –∏ `JSONB` –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞.
3.  **Search:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "–£–º–Ω—ã–π –ø–æ–∏—Å–∫" (Full Text Search) –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é.
4.  **Performance:** –î–æ–±–∞–≤–∏—Ç—å GIN –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.
5.  **Safety:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Å—Ç–Ω—É—é –ø–æ–∫—É–ø–∫—É (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π `FOR UPDATE`, —á—Ç–æ–±—ã —Ç–æ–≤–∞—Ä –Ω–µ —É—à–µ–ª –≤ –º–∏–Ω—É—Å).
6.  **Report:** –ü—Ä–∏–ª–æ–∂–∏—Ç—å –≤—ã–≤–æ–¥ `EXPLAIN ANALYZE` –¥–æ –∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤.

---

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏—à–∫–∏ –≤ –£—á–µ–±–Ω–∏–∫–µ

1.  **Race Condition Simulator:**
    *   –î–≤–µ –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å" (–¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    *   –û—Å—Ç–∞—Ç–æ–∫ —Ç–æ–≤–∞—Ä–∞: 1 —à—Ç.
    *   **–ó–∞–¥–∞–Ω–∏–µ:** –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
    *   **–†–µ–∑—É–ª—å—Ç–∞—Ç (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏):** –û–±–∞ –≤–∏–¥—è—Ç "–£—Å–ø–µ—à–Ω–æ", –æ—Å—Ç–∞—Ç–æ–∫ -1. (–û—à–∏–±–∫–∞!)
    *   **–†–µ–∑—É–ª—å—Ç–∞—Ç (—Å FOR UPDATE):** –û–¥–∏–Ω –∫—É–ø–∏–ª, –≤—Ç–æ—Ä–æ–π –≤–∏–¥–∏—Ç —Å–ø–∏–Ω–Ω–µ—Ä –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É.

2.  **JSONB Builder:**
    *   –í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞.
    *   –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã: `Color: Red`, `Size: XL`.
    *   –£—á–µ–±–Ω–∏–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SQL: `SELECT * FROM products WHERE data @> '{"color": "red", "size": "XL"}'`.

3.  **Explain Visualizer:**
    *   –°—Ç—É–¥–µ–Ω—Ç –≤—Å—Ç–∞–≤–ª—è–µ—Ç JSON-–≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `EXPLAIN ANALYZE`.
    *   –£—á–µ–±–Ω–∏–∫ —Ä–∏—Å—É–µ—Ç –¥–µ—Ä–µ–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—è –∫—Ä–∞—Å–Ω—ã–º "Slow Nodes" (–≥–¥–µ –±–∞–∑–∞ —á–∏—Ç–∞–µ—Ç –≤–µ—Å—å –¥–∏—Å–∫ –ø–æ–¥—Ä—è–¥).

## –û—Ü–µ–Ω–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

- –ö–≤–∏–∑ (—Ç–µ–æ—Ä–∏—è)
  - –§–æ—Ä–º–∞—Ç: 10-20 –≤–æ–ø—Ä–æ—Å–æ–≤ (JSON/YAML/Markdown‚Äë–±–∞–Ω–∫).
  - –ü–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è: ‚â• 80% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.
- –ü—Ä–∞–∫—Ç–∏–∫–∞ (–∫–æ–¥/–∑–∞–¥–∞—á–∏)
  - –†–µ–ø–æ‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (–≤–Ω–æ—Å—è—Ç—Å—è –≤ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: unit/integration/e2e —Ç–µ—Å—Ç–∞–º–∏.
- –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ (CI)
  - –§—Ä–æ–Ω—Ç: Vitest (+ –ø–æ–∫—Ä—ã—Ç–∏–µ), –ª–∏–Ω—Ç–µ—Ä—ã (ESLint/Prettier).
  - –ë—ç–∫: Pytest (httpx.AsyncClient), –ª–∏–Ω—Ç–µ—Ä—ã (ruff/flake8), –ø–æ–∫—Ä—ã—Ç–∏–µ.
  - E2E: Playwright (PW_BASE_URL).
- –†—É–±—Ä–∏–∫–∞
  - S (90‚Äì100): —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ, –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ, —Å—Ç–∏–ª—å —á–∏—Å—Ç—ã–π, –±–µ–∑ smell‚Äë–æ–≤.
  - A (80‚Äì89), B (70‚Äì79), C (<70) ‚Äî –ø–æ —É–±—ã–≤–∞–Ω–∏—é: –Ω–µ–¥–æ—á—ë—Ç—ã/–ø–æ–∫—Ä—ã—Ç–∏–µ/–ø–∞–¥–∞—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
- Remediation
  - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–∞–ª–æ–≤ (–∏–∑ –æ—Ç—á—ë—Ç–∞ CI) ‚Üí —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã —É—á–µ–±–Ω–∏–∫–∞.
